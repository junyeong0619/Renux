# Renux: Cμ–Έμ–΄ κΈ°λ° μ›κ²© λ¦¬λ…μ¤ κ΄€λ¦¬ λ„κµ¬

 

**Renux**λ” μ›κ²© λ¦¬λ…μ¤ μ‹μ¤ν…μ μƒνƒλ¥Ό ν™•μΈν•κ³  κ΄€λ¦¬ν•κΈ° μ„ν•΄ κ°λ°λ ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κΈ°λ°μ μ›κ²© κ΄€λ¦¬ λ„κµ¬μ…λ‹λ‹¤. Cμ–Έμ–΄μ μ‹μ¤ν… ν”„λ΅κ·Έλλ°κ³Ό μ†μΌ“ ν†µμ‹ μ„ κΈ°λ°μΌλ΅ κµ¬ν„λμ—μΌλ©°, `ncurses` λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™μ©ν• ν…μ¤νΈ κΈ°λ° μ‚¬μ©μ μΈν„°νμ΄μ¤(TUI)λ¥Ό ν†µν•΄ ν„°λ―Έλ„ ν™κ²½μ—μ„λ„ μ‚¬μ©μ μΉν™”μ μΈ κ²½ν—μ„ μ κ³µν•©λ‹λ‹¤.

## π“‹ μ£Όμ” κΈ°λ¥

  - **μ‚¬μ©μ μΈμ¦**: μ•μ „ν• μ ‘μ†μ„ μ„ν• λ΅κ·ΈμΈ κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.
  - **μ‹μ¤ν… μ‚¬μ©μ μ •λ³΄ μ΅°ν**: μ„λ²„μ— λ“±λ΅λ μ‚¬μ©μ λ©λ΅μ„ μ‹¤μ‹κ°„μΌλ΅ ν™•μΈν•κ³  μƒμ„Έ μ •λ³΄λ¥Ό μ—΄λν•  μ μμµλ‹λ‹¤.
  - **μ›κ²© μ‰ λ…λ Ήμ–΄ μ‹¤ν–‰**: `ls`μ™€ κ°™μ΄ κ°„λ‹¨ν• μ‰ λ…λ Ήμ–΄λ¥Ό μ›κ²© μ„λ²„μ—μ„ μ‹¤ν–‰ν•κ³  κ²°κ³Όλ¥Ό μ¦‰μ‹ ν™•μΈν•  μ μμµλ‹λ‹¤.
  - **TUI κΈ°λ° μƒνΈμ‘μ©**: λ©”λ‰΄ μ‹μ¤ν…μ„ ν†µν•΄ μ‚¬μ©μ λ©λ΅ μ΅°ν λ° κ΄€λ¦¬ κΈ°λ¥μ„ μ†μ‰½κ² μ„ νƒν•κ³  μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤.

## π› οΈ μ£Όμ” μ‚¬μ© κΈ°μ 

### 1\. C μ–Έμ–΄ λ° μ‹μ¤ν… ν”„λ΅κ·Έλλ°

Cμ–Έμ–΄λ” λ¦¬λ…μ¤μ μ €μμ¤€(low-level) APIμ— μ§μ ‘ μ ‘κ·Όν•μ—¬ μ‹μ¤ν…μ„ μ μ–΄ν•κ³ , λ©”λ¨λ¦¬λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•μ—¬ μ„±λ¥μ„ μµμ ν™”ν•λ” λ° κ°€μ¥ μ ν•©ν•μ—¬ μ±„νƒν–μµλ‹λ‹¤.

  - **`pwd.h`**: `getpwent`, `setpwent`, `endpwent` ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ `/etc/passwd` νμΌμ μ‚¬μ©μ μ •λ³΄λ¥Ό μμ°¨μ μΌλ΅ μ½μ–΄μ¤λ” λ° μ‚¬μ©ν–μµλ‹λ‹¤.
  - **`popen`, `pclose`**: `ls`, `awk`μ™€ κ°™μ€ μ‰ λ…λ Ήμ–΄λ¥Ό μ„λ²„μ—μ„ μ‹¤ν–‰ν•κ³ , κ·Έ κ²°κ³Όλ¥Ό νμ΄ν”„(pipe)λ΅ μ½μ–΄μ™€ ν΄λΌμ΄μ–ΈνΈμ— λ™μ μΈ μ •λ³΄λ¥Ό μ „λ‹¬ν•λ” κΈ°λ¥μ„ κµ¬ν„ν–μµλ‹λ‹¤.
  - **`__builtin_expect`**: GCC ν™•μ¥ κΈ°λ¥μ„ ν™μ©, `likely(x)`μ™€ `unlikely(x)` λ§¤ν¬λ΅λ¥Ό μ •μν•μ—¬ μ»΄νμΌλ¬μ— λ¶„κΈ° μμΈ΅ μ •λ³΄λ¥Ό μ κ³µν•¨μΌλ΅μ¨ μ½”λ“ μ‹¤ν–‰μ„ λ―Έμ„Έν•κ² μµμ ν™”ν–μµλ‹λ‹¤.

### 2\. Linux/POSIX μ†μΌ“ ν”„λ΅κ·Έλλ° (TCP/IP)

ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ•μ •μ μΈ μ–‘λ°©ν–¥ ν†µμ‹ μ„ μ„ν•΄ TCP/IP κΈ°λ°μ μ†μΌ“ ν”„λ΅κ·Έλλ°μ„ ν™μ©ν–μµλ‹λ‹¤.

  - **μ„λ²„**: `socket()` β†’ `bind()` β†’ `listen()` β†’ `accept()` μμ„λ΅ ν΄λΌμ΄μ–ΈνΈμ μ ‘μ† μ”μ²­μ„ μλ½ν•κ³  ν†µμ‹ μ„ μ„ν• μ†μΌ“μ„ μƒμ„±ν•©λ‹λ‹¤.
  - **ν΄λΌμ΄μ–ΈνΈ**: `socket()` β†’ `connect()` μμ„λ΅ μ„λ²„μ— μ—°κ²°μ„ μ‹λ„ν•©λ‹λ‹¤.
  - **λ°μ΄ν„° μ†΅μμ‹ **: `send()`/`write()` λ° `read()` ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ μ–‘λ°©ν–¥μΌλ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μµλ‹λ‹¤.

### 3\. Ncurses λΌμ΄λΈλ¬λ¦¬ (TUI κµ¬ν„)

ν„°λ―Έλ„ ν™κ²½μ—μ„ κ·Έλν”½ μΈν„°νμ΄μ¤(GUI)μ™€ μ μ‚¬ν• μ‚¬μ©μ κ²½ν—μ„ μ κ³µν•κΈ° μ„ν•΄ `ncurses` λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν–μµλ‹λ‹¤.

  - **ν™”λ©΄ λ¶„ν• **: `newwin()` ν•¨μλ΅ μ„λ²„ λ΅κ·Έ, λ…λ Ήμ–΄ μ…λ ¥, λ©”μ‹μ§€ μμ‹  μ°½ λ“±μ„ λ…λ¦½μ μΌλ΅ κ΄€λ¦¬ν•μ—¬ ν™”λ©΄μ„ μ²΄κ³„μ μΌλ΅ κµ¬μ„±ν–μµλ‹λ‹¤.
  - **μλ™ μ¤ν¬λ΅¤**: `scrollok()` ν•¨μλ¥Ό ν™μ„±ν™”ν•μ—¬ λ©”μ‹μ§€κ°€ μ°½ ν¬κΈ°λ¥Ό λ²—μ–΄λ‚  λ• μλ™μΌλ΅ μ¤ν¬λ΅¤λλ„λ΅ κµ¬ν„ν–μµλ‹λ‹¤.
  - **μƒνΈμ‘μ© λ©”λ‰΄**: `keypad()`, `wgetch()` λ“±μ„ ν™μ©ν•μ—¬ μ‚¬μ©μκ°€ ν™”μ‚΄ν‘ ν‚¤λ΅ ν•­λ©μ„ μ„ νƒν•λ” λ™μ μΈ λ©”λ‰΄ μ‹μ¤ν…μ„ κµ¬μ¶•ν–μµλ‹λ‹¤.

### 4\. λ©€ν‹°μ¤λ λ”© (Pthreads)

ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό μμ‹ ν•λ” λ™μ•μ—λ„ μ‚¬μ©μμ μ…λ ¥μ„ λ°›μ•„ λ…λ Ήμ„ μ „μ†΅ν•  μ μλ„λ΅ λΉ„λ™κΈ°μ  μ²λ¦¬λ¥Ό μ„ν•΄ λ©€ν‹°μ¤λ λ”©μ„ λ„μ…ν–μµλ‹λ‹¤.

  - **μ¤λ λ“ μƒμ„±**: `pthread_create()`λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„λ΅λ¶€ν„° μ¤λ” λ©”μ‹μ§€λ¥Ό μ „λ‹΄ μ²λ¦¬ν•λ” μμ‹  μ¤λ λ“(`receive_handler`)λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
  - **μ—­ν•  λ¶„λ¦¬**: λ©”μΈ μ¤λ λ“λ” μ‚¬μ©μ μ…λ ¥μ„ μ²λ¦¬ν•μ—¬ μ„λ²„λ΅ μ „μ†΅ν•κ³ , μμ‹  μ¤λ λ“λ” μ„λ²„μ μ‘λ‹µμ„ λ°›μ•„ ν™”λ©΄μ— μ¶λ ¥ν•λ” μ—­ν• μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.
  - **λ™κΈ°ν™”**: `pthread_mutex_t`λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ μ¤λ λ“κ°€ κ³µμ  μμ›(`menu_user_list`)μ— λ™μ‹μ— μ ‘κ·Όν•  λ• λ°μƒν•  μ μλ” κ²½μ μƒνƒ(race condition)λ¥Ό λ°©μ§€ν•κ³  λ°μ΄ν„° μΌκ΄€μ„±μ„ μ μ§€ν•©λ‹λ‹¤.

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
.
β”β”€β”€ server/
β”‚   β”β”€β”€ server.c         # λ©”μΈ μ„λ²„ λ΅μ§ (μ†μΌ“ μƒμ„±, μ—°κ²° λ° μΈμ¦ μ²λ¦¬)
β”‚   β”β”€β”€ service.c        # ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— λ€ν• μ‹¤μ  κΈ°λ¥ μν–‰
β”‚   β””β”€β”€ tui.c, tui.h     # μ„λ²„μ© TUI κ΄€λ ¨ ν•¨μ
β””β”€β”€ client/
    β”β”€β”€ client.c         # λ©”μΈ ν΄λΌμ΄μ–ΈνΈ λ΅μ§ (μ„λ²„ μ ‘μ†, UI, μ¤λ λ“ μƒμ„±)
    β””β”€β”€ tui.c, tui.h     # ν΄λΌμ΄μ–ΈνΈμ© TUI κ΄€λ ¨ ν•¨μ (μ±„ν…, λ©”λ‰΄ κµ¬ν„)
```

## β™οΈ μ£Όμ” κΈ°λ¥ κµ¬ν„ μƒμ„Έ

### μ‚¬μ©μ μΈμ¦ (Login)

1.  ν΄λΌμ΄μ–ΈνΈκ°€ `μ‚¬μ©μμ΄λ¦„,λΉ„λ°€λ²νΈ` ν•μ‹μ λ¬Έμμ—΄μ„ μ„λ²„λ΅ μ „μ†΅ν•©λ‹λ‹¤.
2.  μ„λ²„μ `login_process` ν•¨μλ” `strtok`μΌλ΅ λ¬Έμμ—΄μ„ λ¶„λ¦¬ν•©λ‹λ‹¤.
3.  `is_valid_login` ν•¨μκ°€ `getlogin()`μΌλ΅ μ–»μ€ μ„λ²„ μ‹¤ν–‰ μ‚¬μ©μμ μ΄λ¦„κ³Ό ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ΄λ¦„μ„ λΉ„κµν•κ³ , μ„¤μ •λ λΉ„λ°€λ²νΈμ™€ μΌμΉν•λ”μ§€ ν™•μΈν•μ—¬ μΈμ¦μ„ μν–‰ν•©λ‹λ‹¤.

### μ‚¬μ©μ λ©λ΅ μ΅°ν λ° κ΄€λ¦¬ (`getu`, `manage`)

1.  **μ΅°ν (`getu`)**:
      - ν΄λΌμ΄μ–ΈνΈκ°€ `getu`λ¥Ό μ…λ ¥ν•λ©΄, μ„λ²„λ” `popen("awk -F: '{print $1}' /etc/passwd", "r")`λ¥Ό μ‹¤ν–‰ν•μ—¬ μ‚¬μ©μ λ©λ΅μ„ μ–»μµλ‹λ‹¤.
      - μ„λ²„λ” κ²°κ³Όλ¥Ό ν• μ¤„μ”© ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•κ³ , λ§μ§€λ§‰μ— "END\_OF\_LIST"λ¥Ό λ³΄λ‚΄ μ „μ†΅ μ™„λ£λ¥Ό μ•λ¦½λ‹λ‹¤.
      - ν΄λΌμ΄μ–ΈνΈμ μμ‹  μ¤λ λ“λ” "END\_OF\_LIST"λ¥Ό λ°›κΈ° μ „κΉμ§€ λ¨λ“  μ‚¬μ©μ μ΄λ¦„μ„ λ°°μ—΄(`menu_user_list`)μ— μ €μ¥ν•©λ‹λ‹¤.
2.  **κ΄€λ¦¬ (`manage`)**:
      - ν΄λΌμ΄μ–ΈνΈκ°€ `manage`λ¥Ό μ…λ ¥ν•λ©΄, `show_user_menu` ν•¨μκ°€ `menu_user_list`μ— μ €μ¥λ λ©λ΅μ„ TUI λ©”λ‰΄λ΅ μ¶λ ¥ν•©λ‹λ‹¤.
      - μ‚¬μ©μκ°€ νΉμ • μ μ €λ¥Ό μ„ νƒν•λ©΄, `user_manage_function_selections` ν•¨μκ°€ νΈμ¶λμ–΄ μ¶”κ°€ κΈ°λ¥(μƒν” 1, 2, 3)μ„ μ„ νƒν•λ” 2μ°¨ λ©”λ‰΄κ°€ λ‚νƒ€λ‚©λ‹λ‹¤.

## π€ ν–¥ν›„ κ°μ„  κ³Όμ 

  - **λ°μ΄ν„° μ•”νΈν™”**: ν„μ¬ ν‰λ¬ΈμΌλ΅ ν†µμ‹ ν•λ” λ°μ΄ν„°λ¥Ό `OpenSSL` λΌμ΄λΈλ¬λ¦¬ λ“±μ„ μ μ©ν•μ—¬ SSL/TLS μ•”νΈν™”λ¥Ό μ¶”κ°€ν•  κ³„νμ…λ‹λ‹¤.
  - **μ‹¤μ‹κ°„ μ‘μ—… ν„ν™© λ³΄κ³ **: μ„λ²„μ—μ„ μ¤λ κ±Έλ¦¬λ” μ‘μ—…μ΄ μ‹¤ν–‰λ  κ²½μ°, ν΄λΌμ΄μ–ΈνΈκ°€ μ‘μ—… μ§„ν–‰ μƒν™©μ„ μ• μ μλ„λ΅ μ£ΌκΈ°μ μΈ λ³΄κ³  κΈ°λ¥μ„ μ¶”κ°€ν•  μμ •μ…λ‹λ‹¤.
  - **μ¤λ¥ μ²λ¦¬ κ°•ν™”**: μ†μΌ“ μ—°κ²° λκΉ€, λ°μ΄ν„° μμ‹  μ‹¤ν¨ λ“± λ‹¤μ–‘ν• μμ™Έ μƒν™©μ— λ€ν• μ²λ¦¬λ¥Ό λ³΄κ°•ν•μ—¬ ν”„λ΅κ·Έλ¨μ μ•μ •μ„±μ„ λ†’μΌ κ²ƒμ…λ‹λ‹¤.

## π μ‹μ‘ν•κΈ°

### μ‚¬μ „ μ”κµ¬ μ‚¬ν•­

  - `gcc` μ»΄νμΌλ¬
  - `ncurses` λΌμ΄λΈλ¬λ¦¬ (`libncurses-dev` λλ” `ncurses-devel` ν¨ν‚¤μ§€)

### λΉλ“ λ° μ‹¤ν–‰

1.  **μ €μ¥μ† λ³µμ **

    ```sh
    git clone https://github.com/junyeong0619/Renux.git
    cd Renux
    ```

2.  **μ»΄νμΌ**

    ```sh
    # Makefileμ„ μ‚¬μ©ν•μ—¬ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό λΉλ“ν•©λ‹λ‹¤.
    make
    ```

3.  **μ‹¤ν–‰**

      - **μ„λ²„ μ‹¤ν–‰**:
        ```sh
        ./server <port> <password>
        ```
      - **ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰**:
        ```sh
        ./client <server_ip> <port>
        ```
